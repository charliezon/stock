{% extends '__base__.html' %}

{% block title %}收益率排行{% endblock %}

{% block beforehead %}
<script type="text/javascript">

function initVM(data) {
    var vm = new Vue({
        el: '#vm',
        data: data,
        methods: {
            submit: function (event) {
                event.preventDefault();
                location.href = '/profit_rank/'+$('#start_date').val()+'/'+$('#end_date').val();
            }
        }
    });
    $("#start_date").val(getTodayString());
    $("#end_date").val(getTodayString());
    $('#vm').show();
}

$(function () {
    $('#loading').hide();
    initVM({

    });
});
</script>
{% endblock %}

{% block content %}

<h2>查看指定时间段的收益率排行榜</h2>
<div id="vm" class="uk-width-1-1">
    <form v-on="submit: submit" class="uk-form uk-form-horizontal">
        <div class="uk-alert uk-alert-danger uk-hidden"></div>
        <div class="uk-form-row">
            <label class="uk-form-label" for="start_date"><strong>开始日期</strong></label>
            <div class="uk-form-controls">
                <input id="start_date" v-model="start_date" name="start_date" type="text" data-uk-datepicker="{format:'YYYY-MM-DD'}" class="uk-width-1-1">
            </div>
        </div>
        <div class="uk-form-row">
            <label class="uk-form-label" for="end_date"><strong>结束日期</strong></label>
            <div class="uk-form-controls">
                <input id="end_date" v-model="end_date" name="end_date" type="text" data-uk-datepicker="{format:'YYYY-MM-DD'}" class="uk-width-1-1">
            </div>
        </div>
        <div class="uk-form-row">
            <button type="submit" class="uk-button uk-button-primary"><i class="uk-icon-save"></i> 查询</button>
        </div>
    </form>
</div>
{% if ranks %}
    {% for rank in ranks %}
    <h2>{{rank.year}}年{{rank.month}}月收益率排行榜</h2>
    <table class="uk-table uk-table-hover uk-table-striped uk-table-condensed uk-text-nowrap">
        <thead>
            <tr>
                <th>排行</th>
                <th>账户名</th>
                <th>收益率</th>
                <th>平均本金</th>
                <th>收益</th>
            </tr>
        </thead>
        <tbody>
            {% for account in rank.accounts %}
            <tr >
                <td><div class="uk-badge">{{loop.index}}</div></td>
                <td>{{account.account_name}}</td>
                <td>{{account.profit_rate}}%</td>
                <td>{{account.cost}}</td>
                <td>{{account.profit}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endfor %}
{% endif %}
{% if rank %}
    <h2>{{start_date}}至{{end_date}}收益率排行榜</h2>
    <table class="uk-table uk-table-hover uk-table-striped uk-table-condensed uk-text-nowrap">
        <thead>
            <tr>
                <th>排行</th>
                <th>账户名</th>
                <th>收益率</th>
                <th>平均本金</th>
                <th>收益</th>
            </tr>
        </thead>
        <tbody>
            {% for account in rank %}
            <tr >
                <td><div class="uk-badge">{{loop.index}}</div></td>
                <td>{{account.account_name}}</td>
                <td>{{account.profit_rate}}%</td>
                <td>{{account.cost}}</td>
                <td>{{account.profit}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <a href="/profit_rank" class="uk-button uk-button-primary"><i class="uk-icon-sort-amount-asc"></i> 按月查看收益率排行榜</a>
{% endif %}
{% endblock %}